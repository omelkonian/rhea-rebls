% Dataflow graphs
\tikzset{
	dataflow/.style={draw, fill=myye!80, rounded corners, thick},
	empty/.style={draw=none, inner sep=.3cm},
  	machine/.style={draw, fill=myrd!80, rounded corners, thick, inner sep=.3cm},
  	task/.style={draw, fill=mygr!80, rounded corners, thick, inner sep=.5cm},
  	to/.style={->,>=stealth',shorten >=1pt,semithick},
  	net/.style={to, red, dotted},  	
  	opt/.style={->,>=stealth',shorten >=1pt,semithick,draw=red},
  	point/.style={draw, inner sep=0pt, circle, fill=black},
  	every matrix/.style={ampersand replacement=\&, column sep=.7cm, row sep=.35cm},
  	every node/.style={align=center, anchor=base}
}

% General macros
\newcommand\site[1]{\footnote{\url{#1}}}

\newcommand\xdown{%
   \mathrel{\rotatebox{-90}{$\rightsquigarrow{\rule{.03cm}{0pt}}$}}
}

\newcommand\xright{%
   \mathrel{\rotatebox{0}{$\rightsquigarrow{\rule[-2cm]{0pt}{0cm}}$}}
}

\newcommand\myimage[3]{
	\begin{figure}[h!] 
		\centering
	 	\includegraphics[scale=#2]{#1}
	  	\caption{#3}
	  	\label{fig:#1}
	\end{figure}
}

\newcommand\codefig[3]{
	\begin{figure}[h!]
	  \begin{center} \input{diagrams/#1.tikz} \end{center}
		#2
		\caption{#3}
		\label{fig:#1}
	\end{figure}
}

\newcommand\mydiag[2]{
	\begin{figure}[h!] 
		\centering
	 	\input{diagrams/#1.tikz}
	  	\caption{#2}
	  	\label{fig:#1}
	\end{figure}
}

\newcommand\twofig[3]{
	\begin{figure}[h!]
		\begin{center} \input{diagrams/#1.tikz} \end{center}
		\vspace{-.3cm}
		$\xdown$
		\begin{center} \input{diagrams/#2.tikz} \end{center}
		\caption{#3}
		\label{fig:#1}
	\end{figure}
}

\newcommand\optimization[3]{
	\begin{figure}[h!]
	  \input{diagrams/optimization/#2B.tikz}
	  \hspace{-.4cm}
	  \input{diagrams/optimization/rightarrow#1.tikz}
	  \hspace{-.4cm}
	  \input{diagrams/optimization/#2A.tikz}
		\caption{#3}
		\label{fig:#2}
	\end{figure}	
}

% Source Code
\usemintedstyle{friendly}
\newcommand\mintedfs{0.2cm}
\newmintedfile[hs]{hs}{frame=lines, framesep=\mintedfs}
\newmintedfile[hssm]{hs}{fontsize=\footnotesize, frame=lines, framesep=\mintedfs}
\newmintedfile[jv]{java}{frame=lines, framesep=\mintedfs}
\newmintedfile[scala]{scala}{frame=lines, framesep=\mintedfs}
\newmintedfile[scalas]{scala}{fontsize=\footnotesize, frame=lines, framesep=\mintedfs}
\newmintedfile[scalaxs]{scala}{fontsize=\tiny, frame=lines, framesep=\mintedfs}
\newmintedfile[jvs]{java}{fontsize=\footnotesize, frame=lines, framesep=\mintedfs}
\newmintedfile[jvxs]{java}{fontsize=\tiny, frame=lines, framesep=\mintedfs}